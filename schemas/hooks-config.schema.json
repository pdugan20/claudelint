{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/pdugan20/claudelint/main/schemas/hooks-config.schema.json",
  "title": "Claude Code Hooks Configuration",
  "description": "Schema for hooks.json files that define lifecycle event handlers in Claude Code projects",
  "source": "https://code.claude.com/docs/en/hooks",
  "sourceType": "documentation",
  "type": "object",
  "required": ["hooks"],
  "properties": {
    "description": {
      "type": "string",
      "description": "Optional description of this hooks configuration"
    },
    "hooks": {
      "type": "object",
      "description": "Object with event names as keys, each containing an array of matcher groups",
      "properties": {
        "PreToolUse": { "$ref": "#/$defs/matcherGroupArray" },
        "PostToolUse": { "$ref": "#/$defs/matcherGroupArray" },
        "PostToolUseFailure": { "$ref": "#/$defs/matcherGroupArray" },
        "PermissionRequest": { "$ref": "#/$defs/matcherGroupArray" },
        "Notification": { "$ref": "#/$defs/matcherGroupArray" },
        "UserPromptSubmit": { "$ref": "#/$defs/matcherGroupArray" },
        "Stop": { "$ref": "#/$defs/matcherGroupArray" },
        "SubagentStart": { "$ref": "#/$defs/matcherGroupArray" },
        "SubagentStop": { "$ref": "#/$defs/matcherGroupArray" },
        "PreCompact": { "$ref": "#/$defs/matcherGroupArray" },
        "Setup": { "$ref": "#/$defs/matcherGroupArray" },
        "SessionStart": { "$ref": "#/$defs/matcherGroupArray" },
        "SessionEnd": { "$ref": "#/$defs/matcherGroupArray" },
        "TeammateIdle": { "$ref": "#/$defs/matcherGroupArray" },
        "TaskCompleted": { "$ref": "#/$defs/matcherGroupArray" }
      },
      "additionalProperties": false
    }
  },
  "$defs": {
    "matcherGroupArray": {
      "type": "array",
      "description": "Array of matcher groups for an event",
      "items": { "$ref": "#/$defs/matcherGroup" }
    },
    "matcherGroup": {
      "type": "object",
      "description": "A matcher group with optional pattern and array of hook handlers",
      "required": ["hooks"],
      "properties": {
        "matcher": {
          "type": "string",
          "description": "Optional tool name or pattern to match"
        },
        "hooks": {
          "type": "array",
          "description": "Array of hook handlers to execute",
          "items": { "$ref": "#/$defs/hookHandler" }
        }
      }
    },
    "hookHandler": {
      "type": "object",
      "description": "Individual hook handler (command, prompt, or agent)",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "description": "The type of hook handler",
          "enum": ["command", "prompt", "agent"]
        },
        "command": {
          "type": "string",
          "description": "Shell command to execute (required if type is 'command')"
        },
        "prompt": {
          "type": "string",
          "description": "Prompt text to inject (required if type is 'prompt')"
        },
        "agent": {
          "type": "string",
          "description": "Agent to invoke (required if type is 'agent')"
        },
        "timeout": {
          "type": "number",
          "description": "Timeout in milliseconds",
          "minimum": 0,
          "maximum": 600000
        },
        "statusMessage": {
          "type": "string",
          "description": "Status message displayed while hook runs"
        },
        "once": {
          "type": "boolean",
          "description": "Whether the hook should only fire once per session"
        },
        "model": {
          "type": "string",
          "description": "Model to use for prompt-type hooks"
        }
      },
      "allOf": [
        {
          "if": { "properties": { "type": { "const": "command" } } },
          "then": { "required": ["command"] }
        },
        {
          "if": { "properties": { "type": { "const": "prompt" } } },
          "then": { "required": ["prompt"] }
        },
        {
          "if": { "properties": { "type": { "const": "agent" } } },
          "then": { "required": ["agent"] }
        }
      ]
    }
  }
}
